---
description: Stage files and commit with generated message (requires confirmation)
allowed-tools: Bash(git:*), Read, AskUserQuestion
---

# Commit

Create a commit from staged changes with an AI-generated message.

## Instructions

1. **Security check** - Run `git remote -v` to verify repository

2. **Show staged changes**:
   ```bash
   git diff --cached --stat
   git diff --cached
   ```

3. **If nothing staged**, show unstaged changes and ask what to stage:
   ```bash
   git status --short
   ```
   Then ask user which files to stage (don't auto-stage).

4. **Generate commit message** following conventional commits:
   - `feat:` new feature
   - `fix:` bug fix
   - `refactor:` code change that neither fixes nor adds
   - `docs:` documentation only
   - `chore:` maintenance tasks
   - `test:` adding/updating tests

   Format: `type: short description`

   Keep it under 72 chars. Focus on "why" not "what".

5. **Ask for confirmation** using AskUserQuestion:
   - Show the proposed commit message
   - Options: "Commit as-is", "Edit message", "Cancel"

6. **If approved**, run the commit:
   ```bash
   git commit -m "message here

   Generated by Alex"
   ```

7. **Show result**:
   ```bash
   git log -1 --oneline
   git status --short
   ```

## Security Notes
- NEVER commit if remote points to a public repo and we're in ~/.claude/
- Check for sensitive files (.env, credentials, keys) in staged changes
- Warn if committing to main/master branch directly

$ARGUMENTS
